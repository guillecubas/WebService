<process name="PizzaOrderProcess" targetNamespace="http://homework2" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
    <import namespace="http://soap.patriktrefil.com/" location="PizzaPopularityService.wsdl" />
    <import namespace="http://homework2/" location="PizzaPriceService.wsdl" />

    <!-- Variables -->
    <variable name="pizzaType" messageType="tns:getPizzaPriceMsg" />
    <variable name="pizzaPriceResponse" messageType="tns:getPizzaPriceResponseMsg" />
    <variable name="pizzaPopularity" messageType="tns:getPizzaPopularityMsg" />
    <variable name="pizzaPopularityResponse" messageType="tns:getPizzaPopularityResponseMsg" />

    <sequence>
        <!-- Step 1: Call PizzaPriceService to get pizza price -->
        <invoke name="GetPizzaPrice" partnerLink="PizzaPricePL" operation="getPizzaPriceOperation" inputVariable="pizzaType" outputVariable="pizzaPriceResponse" />

        <!-- Step 2: Call PizzaPopularityService to get pizza popularity -->
        <invoke name="GetPizzaPopularity" partnerLink="PizzaPopularityPL" operation="getPizzaPopularityOperation" inputVariable="pizzaPopularity" outputVariable="pizzaPopularityResponse" />

        <!-- Step 3: Process pizza order based on price and popularity -->
        <if>
            <condition>$pizzaPriceResponse.parameters.return &lt;= 10 and $pizzaPopularityResponse.parameters.return &gt;= 5</condition>
            <then>
                <assign>
                    <copy>
                        <from expression="$pizzaPriceResponse.parameters.return" />
                        <to variable="pizzaOrderPrice" />
                    </copy>
                </assign>
                <invoke name="ProcessOrder" partnerLink="OrderProcessingPL" operation="processOrderOperation" inputVariable="pizzaOrderPrice" />
            </then>
            <else>
                <throw faultName="PizzaOrderNotFeasible" />
            </else>
        </if>
    </sequence>

    <!-- Partner Links -->
    <partnerLinks>
        <partnerLink name="PizzaPricePL" partnerLinkType="tns:PizzaPriceService" myRole="PizzaOrderProcess" />
        <partnerLink name="PizzaPopularityPL" partnerLinkType="tns:PizzaPopularityService" myRole="PizzaOrderProcess" />
        <!-- Assuming you have another partner link for order processing -->
        <partnerLink name="OrderProcessingPL" partnerLinkType="tns:OrderProcessingService" myRole="PizzaOrderProcess" />
    </partnerLinks>
</process>
